<div class="task-list-container">
  <header class="task-header">
    <h1>{{ pageTitle }}</h1>
    <p class="task-summary">
      Total: <strong>{{ totalTasks }}</strong> tasks | 
      Todo: <strong>{{ getTaskCountByStatus('todo') }}</strong> | 
      Doing: <strong>{{ getTaskCountByStatus('doing') }}</strong> | 
      Done: <strong>{{ getTaskCountByStatus('done') }}</strong>
    </p>
  </header>

  <!-- Search filter with two-way binding using [(ngModel)] -->
  <div class="search-section">
    <div class="search-box">
      <label for="search">Search Tasks:</label>
      <input 
        type="text" 
        id="search"
        [(ngModel)]="searchTerm"
        placeholder="Search by title or description..."
        class="search-input">
      <button 
        class="btn btn-secondary btn-sm" 
        (click)="clearSearch()"
        *ngIf="searchTerm">
        Clear
      </button>
    </div>
    <p class="search-results" *ngIf="searchTerm">
      Found <strong>{{ filteredTasks.length }}</strong> task(s) matching "{{ searchTerm }}"
    </p>
  </div>

  <!-- *ngIf directive: Show loading state conditionally -->
  <div class="loading-container" *ngIf="isLoading">
    <p class="loading-message">Loading tasks...</p>
  </div>

  <!-- *ngIf directive: Show tasks section only if not loading -->
  <div class="tasks-section" *ngIf="!isLoading">
    <div class="section-header">
      <h2>Task List</h2>
      <a routerLink="/tasks/new" class="btn btn-primary">
        âž• Create New Task
      </a>
    </div>
    
    <!-- *ngIf directive: Show empty state if no tasks -->
    <div class="empty-state" *ngIf="!hasTasks()">
      <p class="empty-message">No tasks found. Create your first task to get started!</p>
    </div>

    <!-- *ngIf directive: Show no search results -->
    <div class="empty-state" *ngIf="hasTasks() && searchTerm && filteredTasks.length === 0">
      <p class="empty-message">No tasks match your search "{{ searchTerm }}"</p>
    </div>

    <!-- *ngFor directive: Loop through filtered tasks -->
    <!-- Event binding: Listen to events from child component -->
    <div class="tasks-grid" *ngIf="hasTasks() && (!searchTerm || filteredTasks.length > 0)">
      <app-task-item 
        *ngFor="let task of (searchTerm ? filteredTasks : tasks); let i = index" 
        [task]="task"
        [taskIndex]="i"
        (deleteTask)="onDeleteTask($event)"
        (editTask)="onEditTask($event)"
        (statusChange)="onStatusChange($event)">
      </app-task-item>
    </div>
  </div>
</div>
